<!DOCTYPE html>
<html>
	<head>
		<%- include('../../views/partial/meta'); %>
		<title>Transaction History</title>
		<%- include('../../views/partial/stylesheets'); %>
	</head>
	<body>
		<header><%- include('../../views/partial/nav'); %></header>
		<div class="container-fluid vh-100" style="margin-top: 10px">
			<div class="">
				<div class="rounded d-flex justify-content-center">
					<div class="col-md-8 col-sm-12 shadow-lg p-5 bg-light">
						<div class="text-center">
							<h2 class="text-primary">Transaction History</h2>
						</div>
						<div class="row justify-content-center mt-3">
							<table class="table table-striped table-bordered">
								<thead>
									<tr>
										<th scope="col">Date</th>
										<th scope="col">Memo</th>
										<th scope="col">Status</th>
										<th scope="col">From/To</th>
										<th scope="col">Amount</th>
									</tr>
								</thead>
								<tbody>
									<% locals.allTransfers.forEach(transfer => { var dateObject = new
									Date(transfer.transfer_date); var dateString = (dateObject.getMonth() + 1) + "/" +
									dateObject.getDate() + "/" + dateObject.getFullYear(); var isDeposit =
									transfer.from_account == 99999; %>
									<tr>
										<td><%- dateString %></td>
										<td class="justify-content-center"><%- transfer.memo %></td>
										<td class="justify-content-center"><%- transfer.status %></td>
										<% if (!isDeposit) { %>
										<td class="justify-content-center">
											From <%- transfer.from_account %> to <%- transfer.to_account %>
										</td>
										<% } else { %>
										<td class="justify-content-center">Deposit</td>
										<% } %>
										<td class="justify-content-center">$<%- transfer.amount %></td>
									</tr>
									<% }) %>
								</tbody>
							</table>
                            <div class="d-flex justify-content-end my-3">
                                <a class="text-decoration-none text-reset mx-3" href="/admin/viewfinances">
                                    Back
                                </a>
                            </div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
